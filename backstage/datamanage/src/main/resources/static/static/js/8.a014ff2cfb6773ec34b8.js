webpackJsonp([8],{m9dW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),r=i("hgDm"),n={data:function(){return{list:null,listQuery:{total:50,pageNum:1,pageSize:5,enterpriseName:null},statusArray:[{value:0,label:"否"},{value:1,label:"是"}],textMap:{update:"编辑",create:"新增"},dialogStatus:"",dialogFormVisible:!1,enterpriseFormData:{id:"",enterpriseName:"",status:1},rules:{enterpriseName:[{required:!0,message:"名称不能为空",trigger:"blur"}]},listLoading:!0}},created:function(){this.getList()},methods:{openTableMenu:function(e,t){this.$refs.menuContext.openTableMenu(e,t)},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,Object(r.d)(this.listQuery).then(function(t){var i=t.data.data;e.list=i.list,e.listQuery.total=i.total,e.listQuery.pageNum=i.pageNum,e.listQuery.pageSize=i.pageSize,e.listLoading=!1})},resetTemp:function(){this.enterpriseFormData={id:"",enterpriseName:"",status:1}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.enterpriseForm.clearValidate()})},handleUpdate:function(e){var t=this;this.enterpriseFormData=s()({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.enterpriseForm.clearValidate()})},editData:function(){var e=this;this.$refs.enterpriseForm.validate(function(t){if(!t)return!1;Object(r.b)(e.enterpriseFormData).then(function(t){e.dialogFormVisible=!1,e.$message({message:"成功",type:"success"}),e.getList()})})},handleDelete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.a)(e.id).then(function(i){t.$message({message:"删除成功",type:"success"}),t.list.splice(t.list.indexOf(e),1)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{staticClass:"app-query"},[i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"名称"},model:{value:e.listQuery.enterpriseName,callback:function(t){e.$set(e.listQuery,"enterpriseName",t)},expression:"listQuery.enterpriseName"}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("新增")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"120%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""},on:{"row-contextmenu":e.openTableMenu}},[i("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"left",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.enterpriseName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"left",label:"是否可用"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.statusArray,function(a){return a.value==t.row.status?i("span",[e._v(e._s(a.label))]):e._e()})}}])})],1),e._v(" "),i("menu-context",{ref:"menuContext"},[i("menu-context-item",{on:{click:e.handleUpdate}},[e._v("编辑")]),e._v(" "),i("menu-context-item",{on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":e.listQuery.pageNum,"page-sizes":[5,10,15,20],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("div",{staticClass:"el-dialog-enterprise"},[i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"enterpriseForm",staticStyle:{width:"90%","margin-left":"15px"},attrs:{rules:e.rules,model:e.enterpriseFormData,"label-position":"right","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称",prop:"enterpriseName"}},[i("el-input",{model:{value:e.enterpriseFormData.enterpriseName,callback:function(t){e.$set(e.enterpriseFormData,"enterpriseName",t)},expression:"enterpriseFormData.enterpriseName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否可用"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.enterpriseFormData.status,callback:function(t){e.$set(e.enterpriseFormData,"status",t)},expression:"enterpriseFormData.status"}},e._l(e.statusArray,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editData}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]},o=i("VU/8")(n,l,!1,null,null,null);t.default=o.exports}});
//# sourceMappingURL=8.a014ff2cfb6773ec34b8.js.map