webpackJsonp([3,10],{"20ZD":function(e,t){},"9bBU":function(e,t,r){r("mClu");var a=r("FeBl").Object;e.exports=function(e,t,r){return a.defineProperty(e,t,r)}},"9iyu":function(e,t){},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},C77K:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r,a,o,i){var s=[];var u=[];n()(t).forEach(function(t){void 0===t._expanded&&l.default.set(t,"_expanded",r);var n=1;if(void 0!==o&&null!==o&&(n=o+1),l.default.set(t,"_level",n),a?(l.default.set(t,"parent",a),s[n]||(s[n]=0),l.default.set(t,"_marginLeft",s[n]+a._marginLeft),l.default.set(t,"_width",t[i]/a[i]*a._width),s[n]+=t._width):(s[t.id]=[],s[t.id][n]=0,l.default.set(t,"_marginLeft",0),l.default.set(t,"_width",1)),u.push(t),t.children&&t.children.length>0){var c=e(t.children,r,t,n,i);u=u.concat(c)}});return u};var a=r("c/Tr"),n=r.n(a),l=r("7+uW")},"E/TR":function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},Ogvo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("woOf"),n=r.n(a),l=r("bOdI"),o=r.n(l),i=r("dXij"),s=r.n(i),u=r("c/Tr"),c=r.n(u),d=r("7+uW");function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[];return c()(e).forEach(function(e){void 0===e._expanded&&d.default.set(e,"_expanded",t);var l=1;if(void 0!==a&&null!==a&&(l=a+1),d.default.set(e,"_level",l),r&&d.default.set(e,"parent",r),n.push(e),e.children&&e.children.length>0){var o=f(e.children,t,e,l);n=n.concat(o)}}),n}var m={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},rowContextmenu:Function},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||f,r=this.evalArgs?s()([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,r)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow},on:{"row-contextmenu":e.rowContextmenu}},"el-table",e.$attrs,!1),[0===e.columns.length?r("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return r("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?r("span",{staticClass:"tree-ctrl",on:{click:function(r){e.toggleExpanded(t.$index)}}},[t.row._expanded?r("i",{staticClass:"el-icon-minus"}):r("i",{staticClass:"el-icon-plus"})]):e._e()]}}])}):e._l(e.columns,function(t,a){return r("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t){return 0===a?r("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(a,n.row)?r("span",{staticClass:"tree-ctrl",on:{click:function(t){e.toggleExpanded(n.$index)}}},[n.row._expanded?r("i",{staticClass:"el-icon-minus"}):r("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n      "+e._s(n.row[t.value])+"\n    ")]}}])})}),e._v(" "),e._t("default")],2)},staticRenderFns:[]};var p=r("VU/8")(m,h,!1,function(e){r("9iyu"),r("gYXG")},"data-v-aca17ddc",null).exports,v=r("C77K"),b=r("xJrl"),g=r("xT6B"),_={name:"customTreeTableDemo",components:{treeTable:p},data:function(){var e;return{func:v.default,expandAll:!1,data:{},isShowAddChildMenu:"inline",hideStatusArray:[{value:0,label:"否"},{value:1,label:"是"}],args:[null,null,"timeLine"],textMap:{update:"编辑",create:"新增"},dialogStatus:"",dialogFormVisible:!1,resourceFormData:(e={id:"",pNameReadonly:!0,parentId:"",hidden:"",sort:"",name:"",routeUrl:"",bindPageUrl:""},o()(e,"hidden",0),o()(e,"sort",""),o()(e,"createTime",Object(g.a)(new Date,"yyyy-MM-dd hh:mm:ss")),e),parentIdFlag:!0,routeUrlFlag:!0,bindPageUrlFlag:!0,rules:{name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],sort:[{required:!0,message:"排序不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{openTableMenu:function(e,t){0===e.parentId?this.isShowAddChildMenu="inline":this.isShowAddChildMenu="none",this.$refs.menuContext.openTableMenu(e,t)},getList:function(){var e=this;Object(b.d)().then(function(t){var r=t.data.data,a=e.filterFirstLevelMenus(r,0);a.forEach(function(t){t.children=e.getChildMenus(t.id,r)}),e.data=a})},filterFirstLevelMenus:function(e,t){return e.filter(function(e){return e.parentId==t})},getChildMenus:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return r.forEach(function(t){e==t.parentId&&a.push(t)}),a.forEach(function(e){e.children=t.getChildMenus(e.id,r)}),a},resetTemp:function(){var e;this.resourceFormData=(e={id:"",parentId:0,pName:"",hidden:"",sort:"",name:"",routeUrl:"",bindPageUrl:""},o()(e,"hidden",0),o()(e,"sort",""),o()(e,"createTime",Object(g.a)(new Date,"yyyy-MM-dd hh:mm:ss")),e)},handleCreateFirstMenu:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.parentIdFlag=!1,this.routeUrlFlag=!1,this.bindPageUrlFlag=!1,this.$nextTick(function(){e.$refs.resourceForm.clearValidate()})},handleCreateChildMenu:function(e){var t=this;this.resetTemp(),this.resourceFormData.parentId=e.id,this.resourceFormData.pName=e.name,this.dialogStatus="create",this.dialogFormVisible=!0,this.parentIdFlag=!0,this.routeUrlFlag=!0,this.bindPageUrlFlag=!0,this.$nextTick(function(){t.$refs.resourceForm.clearValidate()})},handleUpdate:function(e){var t=this;this.resourceFormData=n()({},e),this.dialogStatus="update",this.dialogFormVisible=!0,0===e.parentId?(this.parentIdFlag=!1,this.routeUrlFlag=!1,this.bindPageUrlFlag=!1):(this.parentIdFlag=!1,this.routeUrlFlag=!0,this.bindPageUrlFlag=!0),this.$nextTick(function(){t.$refs.resourceForm.clearValidate()})},editData:function(){var e=this;delete this.resourceFormData.children,delete this.resourceFormData.parent,this.$refs.resourceForm.validate(function(t){if(!t)return!1;Object(b.b)(e.resourceFormData).then(function(t){e.dialogFormVisible=!1,e.$message({message:"成功",type:"success"}),e.getList()})})},handleDelete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(b.a)(e.id).then(function(e){t.$message({message:"删除成功",type:"success"}),t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},F={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{staticClass:"resource-query"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreateFirstMenu}},[e._v("新增一级菜单")])],1),e._v(" "),r("tree-table",{attrs:{data:e.data,evalFunc:e.func,evalArgs:e.args,expandAll:e.expandAll,border:"","row-contextmenu":e.openTableMenu}},[r("el-table-column",{attrs:{label:"菜单名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"路由地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(0==t.row.parentId&&""==t.row.routeUrl?"无":t.row.routeUrl))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"页面地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.parentId?r("span",[e._v("无")]):r("span",[e._v("\n          "+e._s(""==t.row.bindPageUrl||null==t.row.bindPageUrl?"/"+t.row.routeUrl+"/index":t.row.bindPageUrl)+"\n        ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否隐藏"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.hideStatusArray,function(a){return a.value==t.row.hidden?r("span",[e._v(e._s(a.label))]):e._e()})}}])}),e._v(" "),r("el-table-column",{attrs:{label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.sort))])]}}])})],1),e._v(" "),r("menu-context",{ref:"menuContext"},[r("span",{style:{display:e.isShowAddChildMenu}},[r("menu-context-item",{on:{click:e.handleCreateChildMenu}},[e._v("新增子菜单")])],1),e._v(" "),r("menu-context-item",{on:{click:e.handleUpdate}},[e._v("编辑")]),e._v(" "),r("menu-context-item",{on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),r("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"resourceForm",staticStyle:{width:"90%","margin-left":"15px"},attrs:{rules:e.rules,model:e.resourceFormData,"label-position":"right","label-width":"80px"}},[e.parentIdFlag?r("el-form-item",{attrs:{label:"父级菜单"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.resourceFormData.pName,callback:function(t){e.$set(e.resourceFormData,"pName",t)},expression:"resourceFormData.pName"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[r("el-input",{model:{value:e.resourceFormData.name,callback:function(t){e.$set(e.resourceFormData,"name",t)},expression:"resourceFormData.name"}})],1),e._v(" "),e.routeUrlFlag?r("el-form-item",{attrs:{label:"路由地址"}},[r("el-input",{model:{value:e.resourceFormData.routeUrl,callback:function(t){e.$set(e.resourceFormData,"routeUrl",t)},expression:"resourceFormData.routeUrl"}})],1):e._e(),e._v(" "),e.bindPageUrlFlag?r("el-form-item",{attrs:{label:"页面地址"}},[r("el-input",{model:{value:e.resourceFormData.bindPageUrl,callback:function(t){e.$set(e.resourceFormData,"bindPageUrl",t)},expression:"resourceFormData.bindPageUrl"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"是否隐藏"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.resourceFormData.hidden,callback:function(t){e.$set(e.resourceFormData,"hidden",t)},expression:"resourceFormData.hidden"}},e._l(e.hideStatusArray,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input",{model:{value:e.resourceFormData.sort,callback:function(t){e.$set(e.resourceFormData,"sort",t)},expression:"resourceFormData.sort"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editData}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[]};var w=r("VU/8")(_,F,!1,function(e){r("20ZD")},null,null);t.default=w.exports},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var a,n=r("C4MV"),l=(a=n)&&a.__esModule?a:{default:a};t.default=function(e,t,r){return t in e?(0,l.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},dXij:function(e,t,r){e.exports={default:r("E/TR"),__esModule:!0}},gYXG:function(e,t){},mClu:function(e,t,r){var a=r("kM2E");a(a.S+a.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})},xJrl:function(e,t,r){"use strict";t.d=function(e){return Object(a.a)({url:"/resource/resourcelistbycondition",method:"get",params:e})},t.c=function(e){return Object(a.a)({url:"/resource/resourceidlistbyroleid",method:"get",params:{roleId:e}})},t.b=function(e){return Object(a.a)({url:"/resource/editresource",method:"post",data:e})},t.a=function(e){return Object(a.a)({url:"/resource/deleteresourcebyid",method:"post",params:{id:e}})};var a=r("vLgD")}});
//# sourceMappingURL=3.882f177362ecb0ab343b.js.map