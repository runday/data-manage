webpackJsonp([5],{"9bBU":function(e,t,a){a("mClu");var l=a("FeBl").Object;e.exports=function(e,t,a){return l.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},STSY:function(e,t,a){"use strict";t.e=function(e){return Object(l.a)({url:"/role/rolelistbyconditionandpage",method:"get",params:e})},t.d=function(e){return Object(l.a)({url:"/role/rolelistbycondition",method:"get",params:e})},t.f=function(e){return Object(l.a)({url:"/role/rolelistbyemployeeid",method:"get",params:{employeeId:e}})},t.b=function(e){return Object(l.a)({url:"/role/editrole",method:"post",data:e})},t.c=function(e){return Object(l.a)({url:"/role/editroleresource",method:"post",data:e})},t.a=function(e){return Object(l.a)({url:"/role/deleterolebyid",method:"post",params:{id:e}})};var l=a("vLgD")},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var l,o=a("C4MV"),r=(l=o)&&l.__esModule?l:{default:l};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var l=a("kM2E");l(l.S+l.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},mMlH:function(e,t,a){"use strict";t.d=function(e){return Object(l.a)({url:"/customer/customerlistbyconditionandpage",method:"get",params:e})},t.c=function(e){return Object(l.a)({url:"/customer/customerlistbycondition",method:"get",params:e})},t.b=function(e){return Object(l.a)({url:"/customer/editcustomer",method:"post",data:e})},t.a=function(e){return Object(l.a)({url:"/customer/deletecustomerbyid",method:"post",params:{id:e}})};var l=a("vLgD")},z9bj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),o=a.n(l),r=a("bOdI"),i=a.n(r);var n=a("e8iq"),s=a("STSY"),u=a("hgDm"),c=a("mMlH"),m={data:function(){var e;return{list:null,listQuery:{total:50,pageNum:1,pageSize:5,realName:null,mobile:null},organizationType:[{label:"系统管理员",value:0},{label:"公司用户",value:1},{label:"企业用户",value:2},{label:"客户用户",value:3}],enterpriseOption:[],customerOption:[],organiztionOption:[],textMap:{update:"编辑",create:"新增"},dialogStatus:"",dialogFormVisible:!1,isAvailableArray:[{value:1,label:"是"},{value:0,label:"否"}],employeeFormData:{mobile:"",orgType:"",orgId:"",email:"",weiXin:"",qQ:"",realName:"",password:"",status:1,mark:""},rules:{orgId:[{required:!0,validator:function(e,t,a){t?a():a(new Error("客户不能为空"))}}],realName:[{trigger:"blur",required:!0,validator:function(e,t,a){t?/^[\u4e00-\u9fa5]+$/.test(t)?a():a(new Error("真实姓名必须为汉字")):a(new Error("真实姓名不能为空"))}}],mobile:[(e={required:!0,trigger:"blur"},i()(e,"required",!0),i()(e,"validator",function(e,t,a){t.length<=0?a(new Error("手机号码不能为空")):/^1[34578]\d{9}$/.test(t)?a():a(new Error("手机号码格式有误"))}),e)],email:[{trigger:"blur",validator:function(e,t,a){t&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?a(new Error("邮箱格式有误")):a()}}],weiXin:[{trigger:"blur",validator:function(e,t,a){t&&!/^[a-zA-Z\d_]{5,}$/.test(t)?a(new Error("微信格式有误")):a()}}],qQ:[{trigger:"blur",validator:function(e,t,a){t&&!/^[1-9]\d{4,9}$/.test(t)?a(new Error("QQ格式有误")):a()}}],password:[{trigger:"blur",required:!0,validator:function(e,t,a){/^.{6,}$/.test(t)?a():a(new Error("密码至少为6位"))}}]},dialogRoleFormVisible:!1,roleFormData:{employeeId:"",roleIdArray:[],roleOptions:[]},listLoading:!1}},filters:{statusFilter:function(e){return{1:"success",0:"danger"}[e]},statusFilterLabel:function(e,t){return t.filter(function(t){return t.value==e})}},created:function(){this.getList(),this.initEnterpriseList(),this.initCustomerList()},methods:{initEnterpriseList:function(){var e=this,t=[];Object(u.c)().then(function(a){a.data.data.forEach(function(e){t.push({value:e.id,label:e.enterpriseName})}),e.enterpriseOption=t})},initCustomerList:function(){var e=this,t=[];Object(c.c)().then(function(a){a.data.data.forEach(function(e){t.push({value:e.id+"",label:e.customerName})}),e.customerOption=t})},openTableMenu:function(e,t){this.$refs.menuContext.openTableMenu(e,t)},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,Object(n.f)(this.listQuery).then(function(t){var a=t.data.data;e.list=a.list,e.listQuery.total=a.total,e.listQuery.pageNum=a.pageNum,e.listQuery.pageSize=a.pageSize,e.listLoading=!1})},resetTemp:function(){this.employeeFormData={mobile:"",orgType:"",orgId:"",email:"",weiXin:"",qQ:"",realName:"",password:"",status:1,mark:""}},handleCreate:function(){var e=this;this.resetTemp(),this.employeeFormData.orgType=2,this.organiztionOption=this.enterpriseOption,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.employeeFormData.clearValidate()})},handleUpdate:function(e){var t=this;this.orgTypeChange(Number(e.orgType)),this.employeeFormData=o()({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.employeeFormData.clearValidate()})},orgTypeChange:function(e){this.employeeFormData.orgId="",this.organiztionOption=0===e?[{label:"系统管理员",value:0}]:1===e?[{label:"公司管理员",value:0},{label:"简洁软件有限公司",value:1}]:2===e?this.enterpriseOption:3===e?this.customerOption:[]},editData:function(){var e=this;this.$refs.employeeFormData.validate(function(t){if(!t)return!1;Object(n.b)(e.employeeFormData).then(function(t){e.dialogFormVisible=!1,e.$message({message:"成功",type:"success"}),e.getList()})})},handleDelete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.a)(e.id).then(function(a){t.$message({message:"删除成功",type:"success"}),t.list.splice(t.list.indexOf(e),1)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleEditRole:function(e){var t=this;this.roleFormData.employeeId=e.id,Object(s.d)().then(function(a){var l=[];return a.data.data.forEach(function(e){l.push({value:e.roleId,label:e.roleName})}),t.roleFormData.roleOptions=l,Object(s.f)(e.id)}).then(function(e){var a=[];e.data.data.forEach(function(e){a.push(e.roleId)}),t.roleFormData.roleIdArray=a,t.dialogRoleFormVisible=!0,t.$nextTick(function(){t.$refs.roleForm.clearValidate()})})},editEmployeeRole:function(){var e=this,t=[];this.roleFormData.roleIdArray.forEach(function(a){t.push({roleId:a,employeeId:e.roleFormData.employeeId})}),Object(n.d)({id:this.roleFormData.employeeId,employeeRoleList:t}).then(function(t){e.dialogRoleFormVisible=!1,e.$message({message:"添加成功",type:"success"}),e.getList()})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container employee-container"},[a("el-row",{staticClass:"app-query"},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"姓名"},model:{value:e.listQuery.realName,callback:function(t){e.$set(e.listQuery,"realName",t)},expression:"listQuery.realName"}}),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"电话"},model:{value:e.listQuery.mobile,callback:function(t){e.$set(e.listQuery,"mobile",t)},expression:"listQuery.mobile"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("新增")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"120%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""},on:{"row-contextmenu":e.openTableMenu}},[a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"真实姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"手机号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobile))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.email))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"微信"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.weiXin))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"QQ"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qQ))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"是否可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("statusFilterLabel")(t.row.status,e.isAvailableArray)[0].label)+"\n      ")]}}])})],1),e._v(" "),a("menu-context",{ref:"menuContext"},[a("menu-context-item",{on:{click:e.handleUpdate}},[e._v("编辑")]),e._v(" "),a("menu-context-item",{on:{click:e.handleEditRole}},[e._v("角色管理")]),e._v(" "),a("menu-context-item",{on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.pageNum,"page-sizes":[5,10,15,20],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"el-dialog-employee"},[a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"employeeFormData",staticStyle:{width:"90%","margin-left":"15px"},attrs:{rules:e.rules,model:e.employeeFormData,"label-position":"right","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织类型"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},on:{change:e.orgTypeChange},model:{value:e.employeeFormData.orgType,callback:function(t){e.$set(e.employeeFormData,"orgType",t)},expression:"employeeFormData.orgType"}},e._l(e.organizationType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.employeeFormData.orgId,callback:function(t){e.$set(e.employeeFormData,"orgId",t)},expression:"employeeFormData.orgId"}},e._l(e.organiztionOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[a("el-input",{model:{value:e.employeeFormData.realName,callback:function(t){e.$set(e.employeeFormData,"realName",t)},expression:"employeeFormData.realName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.employeeFormData.mobile,callback:function(t){e.$set(e.employeeFormData,"mobile",t)},expression:"employeeFormData.mobile"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.employeeFormData.email,callback:function(t){e.$set(e.employeeFormData,"email",t)},expression:"employeeFormData.email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"微信",prop:"weiXin"}},[a("el-input",{model:{value:e.employeeFormData.weiXin,callback:function(t){e.$set(e.employeeFormData,"weiXin",t)},expression:"employeeFormData.weiXin"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"QQ",prop:"qQ"}},[a("el-input",{model:{value:e.employeeFormData.qQ,callback:function(t){e.$set(e.employeeFormData,"qQ",t)},expression:"employeeFormData.qQ"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.employeeFormData.password,callback:function(t){e.$set(e.employeeFormData,"password",t)},expression:"employeeFormData.password"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否可用",prop:"status"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},model:{value:e.employeeFormData.status,callback:function(t){e.$set(e.employeeFormData,"status",t)},expression:"employeeFormData.status"}},e._l(e.isAvailableArray,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.employeeFormData.mark,callback:function(t){e.$set(e.employeeFormData,"mark",t)},expression:"employeeFormData.mark"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editData}},[e._v("确认")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"角色管理",visible:e.dialogRoleFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogRoleFormVisible=t}}},[a("el-form",{ref:"roleForm",staticStyle:{width:"90%","margin-left":"15px"},attrs:{model:e.roleFormData,"label-position":"right","label-width":"80px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.roleFormData.roleIdArray,callback:function(t){e.$set(e.roleFormData,"roleIdArray",t)},expression:"roleFormData.roleIdArray"}},e._l(e.roleFormData.roleOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRoleFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editEmployeeRole}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(m,p,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=5.a13d1f798bff5436826a.js.map